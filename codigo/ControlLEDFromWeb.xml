<xml xmlns="http://www.w3.org/1999/xhtml"><block type="arduino_setup" x="-13" y="-287"><statement name="MySetup"><block type="iots_connectnetwork_pass"><value name="ssid"><block type="text"><field name="TEXT">CEP_MONTILLA-UNIFI</field></block></value><value name="password"><block type="text"><field name="TEXT">CEPMONTILLA</field></block></value><next><block type="iots_staticip"><field name="IP">192,168,1,10</field><field name="gateway">192,168,1,1</field><field name="masque">255,255,255,0</field><next><block type="do_while"><value name="CONDI"><block type="logic_negate"><value name="BOOL"><block type="iots_isconnected"></block></value></block></value><statement name="STATNAME"><block type="serial_printL"><value name="CONTENT"><block type="text"><field name="TEXT">.</field></block></value><next><block type="base_delayms"><value name="DELAY_TIME"><block type="math_number"><field name="NUM">200</field></block></value></block></next></block></statement><next><block type="serial_print"><value name="CONTENT"><block type="text"><field name="TEXT">Connected</field></block></value><next><block type="serial_print"><value name="CONTENT"><block type="iots_localip"></block></value><next><block type="iot_startserver"><value name="port"><block type="math_number"><field name="NUM">80</field></block></value></block></next></block></next></block></next></block></next></block></next></block></statement><statement name="MyLoop"><block type="iot_waitconnection"><next><block type="string_declare"><field name="VAR">i</field><comment pinned="false" h="70.33334350585938" w="216.66665649414062">Esperamos peticiones
http://192.168.1.10/ON
http://192.168.1.10/OFF</comment><value name="VALUE"><block type="iotServer_readrequest"></block></value><next><block type="string_iot_clearhttp"><field name="VAR">i</field><next><block type="serial_printL"><value name="CONTENT"><block type="text"><field name="TEXT">Request:</field></block></value><next><block type="serial_print"><value name="CONTENT"><block type="string_get"><field name="VAR">i</field></block></value><next><block type="controls_if"><value name="IF0"><block type="logic_compare"><field name="OP">EQ</field><value name="A"><block type="string_get"><field name="VAR">i</field></block></value><value name="B"><block type="text"><field name="TEXT">ON</field></block></value></block></value><statement name="DO0"><block type="inout_digital_write"><field name="PIN">16</field><field name="STAT">HIGH</field><next><block type="serial_print"><value name="CONTENT"><block type="text"><field name="TEXT">D0 On</field></block></value><next><block type="iot_answer"><value name="iot_answer"><block type="text"><field name="TEXT">LED D0 ON</field></block></value></block></next></block></next></block></statement><next><block type="controls_if"><value name="IF0"><block type="logic_compare"><field name="OP">EQ</field><value name="A"><block type="string_get"><field name="VAR">i</field></block></value><value name="B"><block type="text"><field name="TEXT">OFF</field></block></value></block></value><statement name="DO0"><block type="inout_digital_write"><field name="PIN">16</field><field name="STAT">LOW</field><next><block type="serial_print"><value name="CONTENT"><block type="text"><field name="TEXT">D0 Off</field></block></value><next><block type="iot_answer"><value name="iot_answer"><block type="text"><field name="TEXT">LED D0 OFF</field></block></value></block></next></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>